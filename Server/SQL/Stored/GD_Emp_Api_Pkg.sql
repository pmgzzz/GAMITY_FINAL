prompt === Package GD_Emp_Api_Pkg ===

create or replace
package GD_Emp_Api_Pkg is
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Отдел кадров
-- Api
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Регистрация
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
procedure Registration(pName        in GD_Emp_Personnel.name%type   ,  -- Ф.И.О.
                       pSNILS       in GD_Emp_Personnel.snils%type  ,  -- СНИЛС
                       pPostId      in GD_Emp_Personnel.post_id%type,  -- Id должности
                       pEmployerINN in GD_Emp_Employer.inn%type     ,  -- ИНН работодателя
                       pPIN         in VarChar2                     ,  -- Пароль
                       pId             out GD_Emp_Personnel.id%type ,  -- Id
                       pResult         out Integer                  ,  -- Результат (0 - OK, иначе ошибка)
                       pErrMes         out VarChar2                 ); -- Сообщение об ошибке
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Получение сотрудника по СНИЛСу
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function Get_Personnel_By_SNILS(pSNILS in GD_Emp_Personnel.snils%type) -- СНИЛС
return GD_Emp_Personnel%RowType;
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
end;
/

create or replace
package body GD_Emp_Api_Pkg is
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Отдел кадров
-- Api
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Регистрация
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
procedure Registration(pName        in GD_Emp_Personnel.name%type   ,    -- Ф.И.О.
                       pSNILS       in GD_Emp_Personnel.snils%type  ,    -- СНИЛС
                       pPostId      in GD_Emp_Personnel.post_id%type,    -- Id должности
                       pEmployerINN in GD_Emp_Employer.inn%type     ,    -- ИНН работодателя
                       pPIN         in VarChar2                     ,    -- Пароль
                       pId             out GD_Emp_Personnel.id%type ,    -- Id
                       pResult         out Integer                  ,    -- Результат (0 - OK, иначе ошибка)
                       pErrMes         out VarChar2                 ) is -- Сообщение об ошибке
begin
  GD_Emp_Pkg.Registration(pName,pSNILS,pPostId,pEmployerINN,pPIN,pId,pResult,pErrMes);
end;
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- Получение сотрудника по СНИЛСу
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function Get_Personnel_By_SNILS(pSNILS in GD_Emp_Personnel.snils%type) -- СНИЛС
return GD_Emp_Personnel%RowType is
  rPersonnel GD_Emp_Personnel%RowType;
begin
  select GD_Emp_Personnel.*
    into rPersonnel
    from GD_Emp_Personnel
    where GD_Emp_Personnel.snils=pSNILS;
  return rPersonnel;
end;
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
end;
/
